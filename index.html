<!DOCTYPE html>
<html>
<head>
    <title>E-Commerce Purchase Prediction</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Share Tech Mono', monospace;
            background: black;
            color: #00ffcc;
            overflow: hidden;
        }

        canvas#matrix {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .container {
            width: 600px;
            padding: 30px;
            background: rgba(0,0,0,0.85);
            border: 1px solid #00ffcc;
            box-shadow: 0 0 25px rgba(0,255,204,0.3);
            border-radius: 8px;
            margin: 50px auto;
        }

        h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #00ffcc;
            letter-spacing: 2px;
            text-shadow: 0 0 8px rgba(0,255,204,0.6);
        }

        label {
            font-size: 14px;
            margin-top: 10px;
            display: block;
            opacity: 0.9;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            background: #0b0f14;
            border: 1px solid #00ffcc;
            color: #00ffcc;
            outline: none;
            border-radius: 4px;
        }

        input:focus, select:focus {
            box-shadow: 0 0 10px rgba(0,255,204,0.6);
        }

        button {
            width: 100%;
            padding: 12px;
            margin-top: 20px;
            background: linear-gradient(90deg,#00ffcc,#00ffaa);
            border: none;
            color: #000;
            font-weight: bold;
            letter-spacing: 2px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: linear-gradient(90deg,#00ffaa,#00ffcc);
            box-shadow: 0 0 20px rgba(0,255,204,0.7);
        }

        #result {
            margin-top: 25px;
            padding: 15px;
            background: #0b0f14;
            border-left: 4px solid #00ffcc;
            font-size: 15px;
            box-shadow: inset 0 0 10px rgba(0,255,204,0.2);
            min-height: 40px;
            white-space: pre-wrap;
        }

        .glitch {
            color: #ff003c;
            animation: glitch 0.3s infinite;
        }

        @keyframes glitch {
            0% {text-shadow: 2px 0 #00ffcc, -2px 0 #ff003c;}
            20% {text-shadow: -2px 0 #00ffcc, 2px 0 #ff003c;}
            40% {text-shadow: 2px 2px #00ffcc, -2px -2px #ff003c;}
            60% {text-shadow: -2px 2px #00ffcc, 2px -2px #ff003c;}
            80% {text-shadow: 2px -2px #00ffcc, -2px 2px #ff003c;}
            100% {text-shadow: 0 0 #00ffcc;}
        }

        .loader {
            border: 3px solid #0b0f14;
            border-top: 3px solid #00ffcc;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }

        @keyframes spin {
            0% {transform: rotate(0deg);}
            100% {transform: rotate(360deg);}
        }
    </style>
</head>
<body>
<canvas id="matrix"></canvas>

<div class="container">
    <h2>üï∂ PURCHASE PREDICTION TERMINAL</h2>

    <form id="predictForm">
        <label>Age</label>
        <input type="number" id="Age" required>

        <label>Gender</label>
        <select id="Gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>

        <label>Country</label>
        <select id="Country">
            <option value="India">India</option>
            <option value="Australia">Australia</option>
            <option value="USA">USA</option>
            <option value="UK">UK</option>
            <option value="Canada">Canada</option>
        </select>

        <label>Browsed Category</label>
        <select id="BrowsedCategory">
            <option value="Fashion">Fashion</option>
            <option value="Books">Books</option>
            <option value="Home">Home</option>
            <option value="Electronics">Electronics</option>
            <option value="Sports">Sports</option>
        </select>

        <label>Viewed Time (minutes)</label>
        <input type="number" step="0.1" id="ViewedTimeMin" required>

        <label>Product Price</label>
        <input type="number" step="0.01" id="ProductPrice" required>

        <label>Price Range</label>
        <select id="Price_range">
            <option value="Cheap">Cheap</option>
            <option value="Medium">Medium</option>
            <option value="Expensive">Expensive</option>
        </select>

        <label>Age Group</label>
        <select id="Age_group">
            <option value="Young">Young</option>
            <option value="Middle">Middle</option>
            <option value="Senior">Senior</option>
        </select>

        <label>High Viewed Time</label>
        <select id="HighViewedTime">
            <option value="0">0</option>
            <option value="1">1</option>
        </select>

        <button type="submit">EXECUTE PREDICTION</button>
    </form>

    <div id="result"></div>
</div>

<script>
/* MATRIX EFFECT */
const canvas = document.getElementById('matrix');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const letters = '„Ç¢„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É©„ÉØABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
const fontSize = 16;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function drawMatrix() {
    ctx.fillStyle = 'rgba(0,0,0,0.05)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = '#00ffcc';
    ctx.font = fontSize + 'px monospace';

    for(let i=0;i<drops.length;i++){
        const text = letters[Math.floor(Math.random()*letters.length)];
        ctx.fillText(text,i*fontSize,drops[i]*fontSize);

        if(drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
        drops[i]++;
    }
}
setInterval(drawMatrix,50);

/* TYPE TEXT FUNCTION */
function typeText(element,text,delay=40,html=false){
    element.innerHTML='';
    let i=0;
    function typing(){
        if(i<text.length){
            if(html) element.innerHTML=text.substring(0,i+1);
            else element.textContent+=text.charAt(i);
            i++;
            setTimeout(typing,delay);
        }
    }
    typing();
}


document.getElementById("predictForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const resultDiv=document.getElementById("result");
    resultDiv.innerHTML='EXECUTING PREDICTION <span class="loader"></span>';

    const data={
        Age: parseInt(document.getElementById("Age").value),
        Gender: document.getElementById("Gender").value,
        Country: document.getElementById("Country").value,
        BrowsedCategory: document.getElementById("BrowsedCategory").value,
        ViewedTimeMin: parseFloat(document.getElementById("ViewedTimeMin").value),
        ProductPrice: parseFloat(document.getElementById("ProductPrice").value),
        Price_range: document.getElementById("Price_range").value,
        Age_group: document.getElementById("Age_group").value,
        HighViewedTime: document.getElementById("HighViewedTime").value
    };

    try{
        const response = await fetch("https://fastapi-predict-ig6s.onrender.com/predict",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify(data)
        });
        const result = await response.json();
        let displayText=`> Prediction: ${result.prediction}\n> Probability: ${result.probability}`;
        if(result.probability < 0.5) typeText(resultDiv, `<span class="glitch">${displayText}</span>`,50,true);
        else typeText(resultDiv, displayText,50,false);
    }catch(err){
        typeText(resultDiv, `> SYSTEM ERROR: ${err}`,50);
    }
});
</script>

</body>
</html>
